(()=>{"use strict";function t(t,e){return t&&e?new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e):""}function e(t){return`<div class="em-career-job-error">\n    <p>${t}</p>\n  </div>`}function n(t){if("em-career-job-button"===t.target.className){t.target.parentNode.children[4].classList.toggle("em-career-job-description-show");let e="+ View details";t.target.innerText.includes("- Hide details")||(e="- Hide details"),t.target.innerText=e}}document.addEventListener("DOMContentLoaded",(async function(){const o=document.getElementById("embedding-career-jobs"),a=o.getAttribute("data-company-hash"),i=o.getAttribute("data-state");let r=`https://tht-pdfreport-generator.herokuapp.com/api/company/jobs/active?company_unique_key=${a}`;const c=document.createElement("div");i&&(r+=`&state=${i}`),o.addEventListener("click",n);try{const s=await fetch(r),{data:l}=await s.json();l.value.forEach((t=>t.location=[t.jobpost_city,t.jobpost_state].filter(Boolean).join(", ")));const p=function(t,e){switch(e){case"dev":return"https://introlab-applicant-redesign.herokuapp.com/application-form";case"stage":return"https://beta-stage-myaccount.discoveredats.com/application-form";case"hotfix":return"https://tht-applicant-hotfix.herokuapp.com/application-form";default:return`https://${t}.discovered.ai/application-form`}}(l.key,i),d=l.value.map((t=>t.location)).filter(((t,e,n)=>n.indexOf(t)===e&&t.trim()));o.insertAdjacentHTML("beforeend",function(t){return`<div class="em-career-job-search">\n\t\t\t\t\t\t\t\t<input placeholder="Search jobs" type="text">\n\t\t\t\t\t\t\t\t<select>\n\t\t\t\t\t\t\t\t\t<option value="all">All locations</option>\n\t\t\t\t\t\t\t\t\t\t${t.map((t=>`<option value="${t}">${t}</option>`)).join("")}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>`}(d)),o.appendChild(c);const m=o.querySelector(".em-career-job-search input"),u=o.querySelector(".em-career-job-search select");let b="",y="all";function j(){const n=l.value.filter((t=>function(t,e){return"all"===e||t.location===e}(t,y)&&function(t,e){return t.jobpost_title.toLowerCase().includes(e.toLowerCase())||t.jobpost_description.toLowerCase().includes(e.toLowerCase())}(t,b)));c.innerHTML="",n.length?function(e,n,o,a){e.forEach((e=>{o.insertAdjacentHTML("beforeend",function(e,n,o){const a=e.compensation_interval?` per ${e.compensation_interval}`:"",i=e.compensation_max?`- ${t(e.compensation_currency,e.compensation_max)}`:"",r=`${t(e.compensation_currency,e.compensation_min)}${i}${a}`;return`<div class="em-career-job-card">\n    <h3 class="em-career-job-title">${e.jobpost_title}</h3>\n    <div class="em-career-job-location" style="display: ${e.jobpost_city||e.jobpost_country?"block":"none"}">${[e.jobpost_city,e.jobpost_state,e.jobpost_country].filter(Boolean).join(", ")||""}</div>\n    <div class="em-career-job-type" style="display: ${e.employment_type_primary_details?"block":"none"}">${{full_time:"Full Time",part_time:"Part Time"}[e.employment_type_primary_details]}</div>\n    <div class="em-career-job-salary" style="display: ${e.compensation_min||e.compensation_max?"block":"none"}">${r}</div>\n    <div class="em-career-job-details">\n        <div class="em-career-job-description">${e.jobpost_description}</div>\n          <a class="em-career-job-apply-btn" target="_blank" href="${n}/${e.company_jobposting_id}?subdomain=${o}">\n            Apply\n          </a>\n    </div>\n    <div class="em-career-job-button">+ View details</div>\n  </div>`}(e,n,a))}))}(n,p,c,l.key):c.insertAdjacentHTML("beforeend",e("No jobs found"))}function f(t){b=t.target.value,j()}function v(t){y=t.target.value,j()}m&&m.addEventListener("input",f),u&&u.addEventListener("change",v),j()}catch(h){o.insertAdjacentHTML("beforeend",e("Oops! Something went wrong."))}}))})();